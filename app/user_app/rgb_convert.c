#include "rgb_convert.h"

// 存放待发送的RGB值
volatile u8 r = 0;
volatile u8 g = 0;
volatile u8 b = 0;

// 存放待发送的cw值
volatile u8 cw = 0;

// 存放遥控器当前要调节的模式(对应遥控器上的色环)
// volatile u8 cur_sel_rgb_cw_mode = CUR_SEL_RGB_MODE;

const u8 table[][3] = {
    {255, 0, 0},
    {255, 5, 0},
    {255, 7, 0},
    {255, 17, 0},
    {255, 20, 0},
    {255, 30, 0},
    {255, 33, 0},
    {255, 38, 0},
    {255, 45, 0},
    {255, 51, 0},
    {255, 58, 0},
    {255, 63, 0},
    {255, 68, 0},
    {255, 76, 0},
    {255, 81, 0},
    {255, 89, 0},
    {255, 94, 0},
    {255, 96, 0},
    {255, 107, 0},
    {255, 109, 0},
    {255, 119, 0},
    {255, 122, 0},
    {255, 127, 0},
    {255, 135, 0},
    {255, 140, 0},
    {255, 147, 0},
    {255, 153, 0},
    {255, 158, 0},
    {255, 165, 0},
    {255, 170, 0},
    {255, 178, 0},
    {255, 183, 0},
    {255, 191, 0},
    {255, 196, 0},
    {255, 198, 0},
    {255, 209, 0},
    {255, 211, 0},
    {255, 221, 0},
    {255, 224, 0},
    {255, 229, 0},
    {255, 237, 0},
    {255, 242, 0},
    {255, 249, 0},
    {255, 255, 0},
    {249, 255, 0},
    {242, 255, 0},
    {237, 255, 0},
    {229, 255, 0},
    {224, 255, 0},
    {221, 255, 0},
    {211, 255, 0},
    {209, 255, 0},
    {198, 255, 0},
    {196, 255, 0},
    {191, 255, 0},
    {183, 255, 0},
    {178, 255, 0},
    {170, 255, 0},
    {165, 255, 0},
    {160, 255, 0},
    {153, 255, 0},
    {147, 255, 0},
    {140, 255, 0},
    {135, 255, 0},
    {127, 255, 0},
    {122, 255, 0},
    {119, 255, 0},
    {109, 255, 0},
    {107, 255, 0},
    {96, 255, 0},
    {94, 255, 0},
    {89, 255, 0},
    {81, 255, 0},
    {76, 255, 0},
    {68, 255, 0},
    {63, 255, 0},
    {58, 255, 0},
    {51, 255, 0},
    {45, 255, 0},
    {38, 255, 0},
    {33, 255, 0},
    {30, 255, 0},
    {20, 255, 0},
    {17, 255, 0},
    {7, 255, 0},
    {5, 255, 0},
    {0, 255, 0},
    {0, 255, 7},
    {0, 255, 12},
    {0, 255, 20},
    {0, 255, 25},
    {0, 255, 30},
    {0, 255, 38},
    {0, 255, 43},
    {0, 255, 51},
    {0, 255, 56},
    {0, 255, 63},
    {0, 255, 68},
    {0, 255, 71},
    {0, 255, 81},
    {0, 255, 84},
    {0, 255, 94},
    {0, 255, 96},
    {0, 255, 102},
    {0, 255, 109},
    {0, 255, 114},
    {0, 255, 122},
    {0, 255, 127},
    {0, 255, 132},
    {0, 255, 140},
    {0, 255, 145},
    {0, 255, 153},
    {0, 255, 158},
    {0, 255, 160},
    {0, 255, 170},
    {0, 255, 173},
    {0, 255, 183},
    {0, 255, 186},
    {0, 255, 191},
    {0, 255, 198},
    {0, 255, 204},
    {0, 255, 211},
    {0, 255, 216},
    {0, 255, 221},
    {0, 255, 229},
    {0, 255, 234},
    {0, 255, 242},
    {0, 255, 247},
    {0, 255, 255},
    {0, 249, 255},
    {0, 247, 255},
    {0, 237, 255},
    {0, 234, 255},
    {0, 224, 255},
    {0, 221, 255},
    {0, 216, 255},
    {0, 209, 255},
    {0, 204, 255},
    {0, 196, 255},
    {0, 191, 255},
    {0, 186, 255},
    {0, 178, 255},
    {0, 173, 255},
    {0, 165, 255},
    {0, 160, 255},
    {0, 158, 255},
    {0, 147, 255},
    {0, 145, 255},
    {0, 135, 255},
    {0, 132, 255},
    {0, 127, 255},
    {0, 119, 255},
    {0, 114, 255},
    {0, 107, 255},
    {0, 102, 255},
    {0, 96, 255},
    {0, 89, 255},
    {0, 84, 255},
    {0, 76, 255},
    {0, 71, 255},
    {0, 63, 255},
    {0, 58, 255},
    {0, 56, 255},
    {0, 45, 255},
    {0, 43, 255},
    {0, 33, 255},
    {0, 30, 255},
    {0, 25, 255},
    {0, 17, 255},
    {0, 12, 255},
    {0, 5, 255},
    {0, 0, 255},
    {5, 0, 255},
    {12, 0, 255},
    {17, 0, 255},
    {25, 0, 255},
    {30, 0, 255},
    {33, 0, 255},
    {43, 0, 255},
    {45, 0, 255},
    {56, 0, 255},
    {58, 0, 255},
    {63, 0, 255},
    {71, 0, 255},
    {76, 0, 255},
    {84, 0, 255},
    {89, 0, 255},
    {94, 0, 255},
    {102, 0, 255},
    {107, 0, 255},
    {114, 0, 255},
    {119, 0, 255},
    {127, 0, 255},
    {132, 0, 255},
    {135, 0, 255},
    {145, 0, 255},
    {147, 0, 255},
    {158, 0, 255},
    {160, 0, 255},
    {165, 0, 255},
    {173, 0, 255},
    {178, 0, 255},
    {186, 0, 255},
    {191, 0, 255},
    {196, 0, 255},
    {204, 0, 255},
    {209, 0, 255},
    {216, 0, 255},
    {221, 0, 255},
    {224, 0, 255},
    {234, 0, 255},
    {237, 0, 255},
    {247, 0, 255},
    {249, 0, 255},
    {255, 0, 255},
    {255, 0, 247},
    {255, 0, 242},
    {255, 0, 234},
    {255, 0, 229},
    {255, 0, 224},
    {255, 0, 216},
    {255, 0, 211},
    {255, 0, 204},
    {255, 0, 198},
    {255, 0, 191},
    {255, 0, 186},
    {255, 0, 183},
    {255, 0, 173},
    {255, 0, 170},
    {255, 0, 160},
    {255, 0, 158},
    {255, 0, 153},
    {255, 0, 145},
    {255, 0, 140},
    {255, 0, 132},
    {255, 0, 127},
    {255, 0, 122},
    {255, 0, 114},
    {255, 0, 109},
    {255, 0, 102},
    {255, 0, 96},
    {255, 0, 94},
    {255, 0, 84},
    {255, 0, 81},
    {255, 0, 71},
    {255, 0, 68},
    {255, 0, 63},
    {255, 0, 56},
    {255, 0, 51},
    {255, 0, 43},
    {255, 0, 38},
    {255, 0, 33},
    {255, 0, 25},
    {255, 0, 20},
    {255, 0, 12},
    {255, 0, 7},

};

void convert_key_val_to_rgb(u8 key_val)
{
    // 如果当前遥控器调节的是RGB值
    if (CUR_SEL_RGB_MODE == ret_mem_data.current_rgb_mode)
    {
        r = table[key_val][0];
        g = table[key_val][1];
        b = table[key_val][2];
    }
    else if (CUR_SEL_CW_MODE == ret_mem_data.current_rgb_mode)
    {
        // 如果当前调节的是亮度值
        cw = (u16)key_val * 100 / 255;
    }
}